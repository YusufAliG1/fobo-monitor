<!DOCTYPE html>
<html class="dark" lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>GerÃ§ek ZamanlÄ± Veriler</title>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700&display=swap" rel="stylesheet" />
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script>
  tailwind.config = {
    darkMode: "class",
    theme: {
      extend: {
        colors: { primary: "#1773cf", background: "#f6f7f8" },
        fontFamily: { display: ["Manrope"] },
      },
    },
  };
</script>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

  // ðŸ”§ Firebase yapÄ±landÄ±rmanÄ± buraya yaz:
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyBNuPMZqn9BaGPBK875GDa-WMZU4kKupUc",
  authDomain: "fobo-esp.firebaseapp.com",
  databaseURL: "https://fobo-esp-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "fobo-esp",
  storageBucket: "fobo-esp.firebasestorage.app",
  messagingSenderId: "592322942405",
  appId: "1:592322942405:web:546261e39a05373a3f67ac",
};

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const resultsRef = ref(db, "results");

  const container = document.getElementById("data-container");

  function formatTime(ts) {
    const d = new Date(ts);
    return d.toLocaleString("tr-TR");
  }

  onValue(resultsRef, (snapshot) => {
    const data = snapshot.val();
    container.innerHTML = "";
    if (!data) {
      container.innerHTML = `<p class="text-center text-gray-500 mt-4">HenÃ¼z veri yok.</p>`;
      return;
    }
    const keys = Object.keys(data).sort();
    keys.forEach((k) => {
      const entry = data[k];
      const time = entry.ts ? formatTime(entry.ts) : "-";
      const a = entry.a ?? "-";
      const b = entry.b ?? "-";
      const product = entry.product ?? "-";
      container.innerHTML =
        `
        <div class="rounded-lg bg-background p-4 shadow-sm dark:bg-gray-800 mb-2">
          <div class="flex items-center justify-between">
            <div class="flex-1">
              <p class="text-xs text-gray-500">${time}</p>
              <div class="mt-1 flex items-baseline gap-4">
                <p class="text-sm"><span class="text-gray-600">P1:</span> <span class="font-semibold">${a}</span></p>
                <p class="text-sm"><span class="text-gray-600">P2:</span> <span class="font-semibold">${b}</span></p>
              </div>
            </div>
            <p class="text-xl font-bold text-primary">${product}</p>
          </div>
        </div>
        ` + container.innerHTML; // Yeni gelen en Ã¼ste eklensin
    });
  });
</script>
</head>
<body class="bg-background dark:bg-gray-900 font-display text-gray-900 dark:text-gray-100">
  <div class="max-w-2xl mx-auto p-4">
    <h1 class="text-2xl font-bold text-center mb-4">ðŸ“Š GerÃ§ek ZamanlÄ± ESP Verileri</h1>
    <div id="data-container" class="space-y-2"></div>
  </div>
</body>
</html>
